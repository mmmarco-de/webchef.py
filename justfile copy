# Default when only using "just"
default:
    @echo "*** No recipe chosen. Dumping justfile."
    @just --dump

# Deploy site
deploy: format push nfsn
    @echo "*** Deploying done!"

# Push to git and deploy to nfsn
push:
    @echo "*** Staging and commiting changes and pushing to remote"
    git add .
    -git commit -m "$(date '+%Y-%m-%d %H:%M')"
    -git push origin main
    @echo "*** Pushing complete!"

# SSH into NFSN and deploy to site
nfsn:
    @echo "*** Deploying to NSFN via SSH and git"
    ssh mmmarcode_mmmarcode@ssh.nyc1.nearlyfreespeech.net 'cd /home/public && git pull origin main && exit'
    @echo "*** Deployment complete!"

# Format code
format: 
    @echo "*** Formatting code..."
    @prettier --write .
    @echo "*** Formatting complete!"